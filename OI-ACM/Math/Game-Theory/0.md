# 博弈论

## 巴什博奕(Bash Game)

> 两个顶尖聪明的人在玩游戏，有 $n$ 个石子，每人可以随便拿 $1$~$m$ 个石子，不能拿的人为败者，问谁会胜利

结论：**若 $(m+1)|n$ ，则先手必败，否则先手必胜**

我们从最简单的情景开始分析

当石子有 $1$~$m$ 个时，毫无疑问，先手必胜

当石子有 $m+1$ 个时，先手无论拿几个，后手都可以拿干净，先手必败

当石子有 $m+2$~$2m$ 时，先手可以拿走几个，剩下 $m+1$ 个，先手必胜

我们不难发现，面临 $m+1$ 个石子的人一定失败

这样的话两个人的最优策略一定是通过拿走石子，使得对方拿石子时还有 $m+1$ 个

我们考虑往一般情况推广

- 设当前的石子数为 $n=k(m+1)+r$

  先手会首先拿走 $r$ 个，接下来假设后手拿走 $x$ 个，先手会拿走 $m+1−x$ 个，这样博弈下去后手最终一定失败

- 设当前的石子数为 $n=k(m+1)$

  假设先手拿 $x$ 个，后手一定会拿 $m+1−x$ 个，这样下去先手一定失败

## Nim游戏

> 有两个顶尖聪明的人在玩游戏，有 $n$ 堆石子，两个人可以从任意一堆石子中拿任意多个石子(不能不拿)，没法拿的人失败，问谁会胜利

结论：**若 $n$ 堆石子的数量异或和非 $0$ 时，则先手必胜，否则先手必败**

Nim游戏的必败态我们是知道的，就是当前 $n$ 堆石子的数量都为零

设 $a_i$ 表示第 $i$ 堆石子的数量，那么必败态局面就是

$0\ \mathrm{xor}\ 0\ \mathrm{xor}\ 0\ \mathrm{xor}\ ⋯\ \mathrm{xor}\ 0=0$

- 对于先手来说，如果当前局面是

​	$a_1\ \mathrm{xor}\ a_2\ \mathrm{xor}\ a_3\ \mathrm{xor}\ ⋯\ \mathrm{xor}\ a_n=k$

​	那么一定存在某个 $a_i$ ，它的二进制表示在最高位 $k$ 上一定是 $1$

​	我们将 $a_i\ \mathrm{xor}\ k$，这样就变成了

​	$a_1\ \mathrm{xor}\ a_2\ \mathrm{xor}\ a_3\ \mathrm{xor}\ ⋯\ \mathrm{xor}\ a_n\ \mathrm{xor}\ k=0$

​	此时先手必胜

- 对于先手来说，如果当前局面是

​	$a_1\ \mathrm{xor}\ a_2\ \mathrm{xor}\ a_3\ \mathrm{xor}\ ⋯\ \mathrm{xor}\ a_n=0$

​	那么我们不可能将某一个 $a_i$ 异或一个非零数字后使得

​	$a_1\ \mathrm{xor}\ a_2\ \mathrm{xor}\ a_3\ \mathrm{xor}\ ⋯\ \mathrm{xor}\ a_n=0$

​	此时先手必败



