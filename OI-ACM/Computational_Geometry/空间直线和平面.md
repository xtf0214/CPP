# 平面

## 概念

### 点法式方程

点 $M_0(x_0,y_0,z_0)$
法向量 $\vec{n}=(A,B,C)$
因为 $\overrightarrow{M_0M}\cdot \vec{n}=0$
所以有 $A(x-x_0)+B(y-y_0)+C(z-z_0)=0$

### 一般方程

$Ax+By+Cz+D=0$

### 截距式方程

$\dfrac{x}{a}+\dfrac{y}{b}+\dfrac{z}{c}=1$

## 应用

### 点到平面的距离

> 设 $P_0(x_0,y_0,z_0)$ 是平面 $eq0:Ax+By+Cz+D=0$ 外一点，求 $P_0$到这个平面的距离

在平面上任取一点 $P_1(x_1,y_1,z_1)$，并作其法向量 $\vec{n}=(A,B,C)$

设 $\overrightarrow{P_1P_0}$ 与 $\vec{n}$的夹角 $\theta$

则 $d=|\overrightarrow{P_1P_0}|\cdot|\cos\theta|=\dfrac{\overrightarrow{P_1P_0}\cdot\vec{n}}{|\vec{n}|}=\dfrac{Ax_0+By_0+Cz_0+D}{\sqrt{A^2+B^2+C^2}}$

### 点到平面的投影

> 设 $P_0(x_0,y_0,z_0)$ 是平面 $eq0:Ax+By+Cz+D=0$ 外一点，求 $P_0$在这个平面的投影

设投影点为 $P_1(x_1,y_1,z_1)$，作过点 $P_0$ 且垂直于平面 $eq0$ 的直线
$\begin{cases}
x=x_0+At \\
y=y_0+Bt \\
z=z_0+Ct \\
\end{cases}$
不难发现 $P_1$ 为直线与平面的交点，则 $P_1$ 满足
$\begin{cases}
Ax_1+By_1+Cz_1+D=0 \\
x_1=x_0+At \\
y_1=y_0+Bt \\
z_1=z_0+Ct \\
\end{cases}$
得 $t=-\dfrac{Ax_0+By_0+Cz_0+D}{A^2+B^2+C^2}=-\dfrac{d}{|\vec{s}|}$

故投影点为 $P_1\left(x_0+At,y_0+Bt,z_0+Ct\right)$

若设直线方向向量 $\vec{s}=(A,B,C)$ 的单位向量为 $\vec{e}=\dfrac{\vec{s}}{|\vec{s}|}=\left(\dfrac{A}{\sqrt{A^2+B^2+C^2}},\dfrac{B}{\sqrt{A^2+B^2+C^2}},\dfrac{C}{\sqrt{A^2+B^2+C^2}}\right)$

则投影点为 $P_1(x_0-d\vec{e_x},y_0-d\vec{e_y},z_0-d\vec{e_z})$

# 空间直线

## 概念

### 点向式方程

点 $M_0(x_0,y_0,z_0)$
方向向量 $\vec{s}=(m,n,p)$
因为 $\overrightarrow{M_0M}//\vec{s}$
所以有 $\dfrac{x-x_0}{m}=\dfrac{y-y_0}{n}=\dfrac{z-z_0}{p}$

### 参数方程

由点向式方程得
$\dfrac{x-x_0}{m}=\dfrac{y-y_0}{n}=\dfrac{z-z_0}{p}=t$，所以有
$\begin{cases}
x=x_0+mt \\
y=y_0+nt \\
z=z_0+pt \\
\end{cases}$

### 一般式方程

空间直线可以看作两平面的交线，所以有
$\begin{cases}
A_1x+B_1y+C_1z+D_1=0 \\
A_2x+B_2y+C_2z+D_2=0 \\
\end{cases}$

### 点向式转化一般式

> 正交向量：满足 $\vec{u}\cdot\vec{v}=0$ 互为正交向量

直线 $\dfrac{x-x_0}{m}=\dfrac{y-y_0}{n}=\dfrac{z-z_0}{p}$
恒过点 $M_0(x_0,y_0,z_0)$

设方向向量 $\vec{s}=(m,n,p)$ 的两个正交向量
$\vec{u}=(-(n+p),m,m)$，$\vec{v}=(n,-(m+p),n)$

根据平面点法式方程定义，原直线为
$\begin{cases}
\vec{u}\cdot(x-x_0,y-y_0,z-z_0)=0 \\
\vec{v}\cdot(x-x_0,y-y_0,z-z_0)=0 \\
\end{cases}$

### 一般式转化点向式

直线$\begin{cases}
eq1:A_1x+B_1y+C_1z+D_1=0 \\
eq2:A_2x+B_2y+C_2z+D_2=0 \\
\end{cases}$
由于两平面的交线同时垂直于两个平面的法向量，
于是方向向量 $\vec{s}=(m,n,p)=(A_1,B_1,C_1)\times(A_2,B_2,C_2)$
直线上点 $M_0(x_0,y_0,z_0)$ 满足
$\begin{cases}
A_1x_0+B_1y_0+C_1z_0+D_1=0 \\
A_2x_0+B_2y_0+C_2z_0+D_2=0 \\
\end{cases}$
对于不同直线，有三种解
$(x_0,y_0,z_0)=\left(
0,
-\dfrac
{\begin{vmatrix}
D_1 & C_1 \\
D_2 & C_2 \\
\end{vmatrix}}
{\begin{vmatrix}
B_1 & C_1 \\
B_2 & C_2 \\
\end{vmatrix}},
-\dfrac
{\begin{vmatrix}
B_1 & D_1 \\
B_2 & D_2 \\
\end{vmatrix}}
{\begin{vmatrix}
B_1 & C_1 \\
B_2 & C_2 \\
\end{vmatrix}}
\right) (\vec{s}_x\ne 0)$

$(x_0,y_0,z_0)=\left(
-\dfrac
{\begin{vmatrix}
D_1 & C_1 \\
D_2 & C_2 \\
\end{vmatrix}}
{\begin{vmatrix}
A_1 & C_1 \\
A_2 & C_2 \\
\end{vmatrix}},
0,
-\dfrac
{\begin{vmatrix}
A_1 & D_1 \\
A_2 & D_2 \\
\end{vmatrix}}
{\begin{vmatrix}
A_1 & C_1 \\
A_2 & C_2 \\
\end{vmatrix}}
\right) (\vec{s}_y\ne 0)$

$(x_0,y_0,z_0)=\left(
-\dfrac
{\begin{vmatrix}
D_1 & B_1 \\
D_2 & B_2 \\
\end{vmatrix}}
{\begin{vmatrix}
A_1 & B_1 \\
A_2 & B_2 \\
\end{vmatrix}},
-\dfrac
{\begin{vmatrix}
A_1 & D_1 \\
A_2 & D_2 \\
\end{vmatrix}}
{\begin{vmatrix}
A_1 & B_1 \\
A_2 & B_2 \\
\end{vmatrix}},
0\right) (\vec{s}_z\ne 0)$

则直线为

$$
\dfrac{x-x_0}{m}=\dfrac{y-y_0}{n}=\dfrac{z-z_0}{p}

$$

## 应用

## 应用

### 点到直线的距离

> 设 $P_0(x_0,y_0,z_0)$ 是直线 $\dfrac{x-M_x}{m}=\dfrac{y-M_y}{n}=\dfrac{z-M_z}{p}$ 外一点，求 $P_0$到这个直线的距离

直线恒过点 $M(M_x,M_y,M_z)$，方向向量 $\vec{s}=(m,n,p)$，设 $\overrightarrow{MP_0}$ 与 $\vec{s}$的夹角 $\theta$

则 $d=|\overrightarrow{MP_0}|\cdot|\sin\theta|=\dfrac{|\overrightarrow{MP_0}\times\vec{s}|}{|\vec{s}|}$

### 点到直线的投影

> 设 $P_0(x_0,y_0,z_0)$ 是直线 $\dfrac{x-M_x}{m}=\dfrac{y-M_y}{n}=\dfrac{z-M_z}{p}$ 外一点，则 $P_0$在这个直线的投影

设投影点为 $P_1(x_1,y_1,z_1)$
作过点 $P_0$ 且垂直于该直线的平面

$$
m(x-x_0)+n(y-y_0)+p(z-z_0)=0

$$

不难发现 $P_1$ 为直线与平面的交点
则 $P_1$ 满足
$\begin{cases}
m(x_1-x_0)+n(y_1-y_0)+p(z_1-z_0)=0 \\
x_1=M_x+mt \\
y_1=M_y+nt \\
z_1=M_z+pt \\
\end{cases}$
得 $t=\dfrac{m(x_0-M_x)+n(y_0-M_y)+p(z_0-M_z)}{m^2+n^2+p^2}=\dfrac{\overrightarrow{MP_0}\cdot\vec{s}}{|\vec{s}|^2}=\dfrac{|\overrightarrow{MP_1}|}{|\vec{s}|}$

故投影点为 $P_1\left(M_x+mt,M_y+nt,M_z+pt\right)$

若设方向向量 $\vec{s}=(m,n,p)$ 的单位向量为 $\vec{e}=\dfrac{\vec{s}}{|\vec{s}|}=\left(\dfrac{m}{\sqrt{m^2+n^2+p^2}},\dfrac{n}{\sqrt{m^2+n^2+p^2}},\dfrac{p}{\sqrt{m^2+n^2+p^2}}\right)$

则投影点为 $P_1(M_x+|\overrightarrow{MP_1}|\vec{e_x},M_y+|\overrightarrow{MP_1}|\vec{e_y},M_z+|\overrightarrow{MP_1}|\vec{e_z})$

### 直线到平面的投影

#### 一般式方程

> 直线

$$
\begin{cases}
eq1:A_1x+B_1y+C_1z+D_1=0 \\
eq2:A_2x+B_2y+C_2z+D_2=0 \\
\end{cases}

$$

投影平面

$$
eq0:A_0x+B_0y+C_0z+D_0=0

$$

设过该直线的平面束的方程为

$$
eq3:A_1x+B_1y+C_1z+D_1+\lambda (A_2x+B_2y+C_2z+D_2)=0

$$

$$
\iff eq3:(A_1+\lambda A_2)x+(B_1+\lambda B_2)y+(C_1+\lambda C_2)z+(D_1+\lambda D_2)=0

$$

当该平面与投影平面垂直时，两平面交线即为投影直线

$$
(A_1+\lambda A_2,B_1+\lambda B_2,C_1+\lambda C_2)\cdot(A_0,B_0,C_0)=0

$$

$$
\iff(A_1+\lambda A_2)A_0+(B_1+\lambda B_2)B_0+(C_1+\lambda C_2)C_0=0

$$

此时$\lambda=-\dfrac{A_0A_1+B_0B_1+C_0C_1}{A_0A_2+B_0B_2+C_0C_2}=-\dfrac{(A_0,B_0,C_0)\cdot(A_1,B_1,C_1)}{(A_0,B_0,C_0)\cdot(A_2,B_2,C_2)}$

于是直线的投影为
$\begin{cases}
eq0:A_0x+B_0y+C_0z+D_0=0 \\
eq3:(A_1+\lambda A_2)x+(B_1+\lambda B_2)y+(C_1+\lambda C_2)z+(D_1+\lambda D_2)=0 \\
\end{cases}$

#### 点向式方程

> 直线
>
> $$
> \dfrac{x-x_0}{m}=\dfrac{y-y_0}{n}=\dfrac{z-z_0}{p}
>
> $$
>
> 投影平面
>
> $$
> eq0:A_0x+B_0y+C_0z+D_0=0
>
> $$

设过该直线且与投影平面垂直的平面为

$$
eq1:A_1(x-x_0)+B_1(y-y_0)+C_1(z-z_0)=A_1x+B_1y+C_1z+D_1=0

$$

其中 $(A_1,B_1,C_1)=(m,n,p)\times(A_0,B_0,C_0)$

$D_1=-(A_1x_0+B_1y_0+C_1z_0)=-(A_1,B_1,C_1)\cdot(x_0,y_0,z_0)$

两平面交线即为投影直线
$\begin{cases}
eq0:A_0x+B_0y+C_0z+D_0=0 \\
eq1:A_1x+B_1y+C_1z+D_1=0 \\
\end{cases}$
